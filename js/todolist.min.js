$(function(){var b=Number(localStorage.getItem("todo-counter"))+1,e=0,k,l=$("#todo-form");$("#show-items li a");var f=$("#show-items"),m=$(".editable"),n=$("#clear-all"),h=$("#todo"),g=[],d;d=(d=localStorage.getItem("todo-orders"))?d.split(","):[];e=0;for(k=d.length;e<k;e++)f.append("<li id='"+d[e]+"'><span class='editable'>"+localStorage.getItem(d[e])+"</span> <a href='#'>X</a></li>");l.submit(function(a){a.preventDefault();$.publish("/add/",[])});f.delegate("a","click",function(a){var c=$(this);
a.preventDefault();$.publish("/remove/",[c])});f.sortable({revert:!0,stop:function(){$.publish("/regenerate-list/",[])}});m.inlineEdit({save:function(a,c){var b=$(this);localStorage.setItem(b.parent().attr("id"),c.value)}});n.click(function(a){a.preventDefault();$.publish("/clear-all/",[])});f.delegate("li","mouseover mouseout",function(a){var c=$(this).find("a");"mouseover"===a.type?c.stop(!0,!0).fadeIn():c.stop(!0,!0).fadeOut()});$.subscribe("/add/",function(){""!==h.val()&&(localStorage.setItem("todo-"+
b,h.val()),localStorage.setItem("todo-counter",b),f.append("<li id='todo-"+b+"'><span class='editable'>"+localStorage.getItem("todo-"+b)+" </span><a href='#'>x</a></li>"),$.publish("/regenerate-list/",[]),$("#todo-"+b).css("display","none").fadeIn(),h.val(""),b++)});$.subscribe("/remove/",function(a){var c=a.parent().attr("id");localStorage.removeItem("'"+c+"'");a.parent().fadeOut(function(){a.parent().remove();$.publish("/regenerate-list/",[])})});$.subscribe("/regenerate-list/",function(){var a=
$("#show-items li");g.length=0;a.each(function(){var a=$(this).attr("id");g.push(a)});localStorage.setItem("todo-orders",g.join(","))});$.subscribe("/clear-all/",function(){var a=$("#show-items li");g.length=0;localStorage.clear();a.remove()})});